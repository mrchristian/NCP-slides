digraph main {
    layout=neato;
    bgcolor="white";
    splines=curved;
    overlap=false;  
    nodesep=0.8;    
    ranksep=1.0;   

    // Diagram label (version)
    label="v 1.0 2026-02-13-13:46";
    labelloc="t";
    fontsize=20;
    fontname="Helvetica-Bold";

    // A4 landscape in inches
    page="11.69,8.27";
    size="10.8,7.5!";
    margin=0.4;

    node [
        fontname="Helvetica",
        fontsize=16,
        penwidth=2,
        color="#4A90E2"
    ];

    // Workflow circle edges in salmon pink
    edge [color="#fa8072", penwidth=2, arrowsize=1.2];

    // Main workflow circles - repositioned for better spacing
    node [shape=circle, style=filled, width=1.6, fixedsize=true, fillcolor="#EAF3FF"];
    n1 [label="1.\nAuthoring", pos="0,0!"];
    n2 [label="2.\nProduction", pos="2.5,2!"];
    n3 [label="3.\nMake Book", pos="5,0!"];
    n4 [label="4.\nMulti-format", pos="7.5,-2!"];
    n5 [label="5.\nPackaging", pos="10,0!"];

    n1 -> n2;
    n2 -> n3;
    n3 -> n4;
    n4 -> n5;

    // Tool/system boxes (green)
    node [shape=box, style="rounded,filled", fillcolor="#B9EAB3", width=2.4, height=0.9];
    edge [color="#4A90E2", penwidth=2, arrowsize=1.2];

    // Authoring tools - positioned further away
    wp  [label="Word processor", pos="-2.5,1.2!"];
    zot [label="Zotero", pos="-2.5,-1.2!"];
    wp  -> n1;
    zot -> n1;

    // Production systems - positioned above to avoid main workflow arrow
    nc  [label="Nextcloud", pos="1.5,4!"];
    th  [label="Thoth", pos="3.5,4!"];
    nc -> n2;
    th -> n2;

    // Make Book software - positioned above to avoid arrows
    nos [label="New software (MB)", pos="5,2!"];
    nos -> n3;

    // Multi-format tool - positioned to the right
    qp  [label="Quarto / Pandoc", pos="9,-2!"];
    qp -> n4;

    // Packaging tools - positioned below with more spacing
    qpk [label="Quarto",  pos="9,-3.5!"];
    jup [label="Jupyter", pos="10,-3.5!"];
    gl  [label="GitLab",  pos="11,-3.5!"];
    qpk -> n5;
    jup -> n5;
    gl  -> n5;
}